(this.webpackJsonpchatapp=this.webpackJsonpchatapp||[]).push([[0],{129:function(e,t){e.exports="data:image/png;base64,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"},159:function(e,t,a){e.exports=a(212)},164:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),i=a.n(o),s=(a(164),a(19)),l=a(20),c=a(22),m=a(21),u=a(23),p=a(252),d=a(253),g=a(251),h=a(67),f=a(269),E=a(271),b=a(250),y=a(247),v=a(248),x=a(246),N=a(244),S=Object(N.a)((function(e){return{deleteButton:{backgroundColor:e.palette.primary.main,borderRadius:"4px",padding:"5px 15px 3px 15px",lineHeight:0,"& svg":{color:e.palette.primary.contrastText,cursor:"pointer"}},dialogTitle:{color:e.palette.primary.dark},postAction:{fontWeight:500},cancelAction:{fontWeight:500}}})),w=a(126),O=a.n(w),k=a(12),T=a(47),j=a.n(T),A=a(66),C=a(44),W=a.n(C),R=function(e){return localStorage.setItem("messages",JSON.stringify(e))},I=function(e){var t="Bearer ".concat(e);localStorage.setItem("fbToken",t),W.a.defaults.headers.common.Authorization=t},M=function(e){return localStorage.getItem(e)},L=function(e){var t=new FormData;return t.append("file",e,e.name),t},D=function(e,t){return e.protected.user.toLowerCase()===t.toLowerCase()},P="https://europe-west1-chat-app-5c91e.cloudfunctions.net/api",U={addMessage:function(e,t,a){return function(a){var n=M("fbToken"),r={user:t.protected.user,message:e};fetch("".concat(P,"/message"),{method:"POST",headers:{Accept:"*/*","Content-type":"application/json",Authorization:n,referrer:"",mode:"cors",cache:"reload",redirect:"follow"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){a({type:"ADD_MESSAGE",payload:e})})).then((function(){a({type:"CLEAR_ERRORS"})})).catch((function(e){return console.log(e)}))}}},_=Object(k.b)((function(e){return{user:e.user}}),U)((function(e){var t=e.addMessage,a=e.user,o=S(),i=Object(n.useState)(!1),s=Object(h.a)(i,2),l=s[0],c=s[1],m=Object(n.useState)(""),u=Object(h.a)(m,2),p=u[0],d=u[1],N=function(e){var n=e.target.parentElement.name;c(!1),n&&"post"===n.toLowerCase()&&t(p,a)};return r.a.createElement("div",{className:o.deleteButton},r.a.createElement(O.a,{onClick:function(){c(!0)},color:"secondary"}),r.a.createElement(E.a,{open:l,onClose:N},r.a.createElement(x.a,{className:o.dialogTitle,id:"alert-dialog-title"},"New Message"),r.a.createElement(y.a,{className:o.dialogdescription},r.a.createElement(v.a,{id:"alert-dialog-description"},"Press ",r.a.createElement("span",{className:o.postAction},"Post")," to add a new Message or press  ",r.a.createElement("span",{className:o.cancelAction}," Cancel"),", to exit form."),r.a.createElement(f.a,{autoFocus:!0,margin:"dense",id:"newMessage",label:"New message",type:"text",onChange:function(e){return function(e){var t=e.target.value;d(t)}(e)},fullWidth:!0})),r.a.createElement(b.a,null,r.a.createElement(g.a,{onClick:function(e){return N(e)},name:"cancel",color:"secondary"},"Cancel"),r.a.createElement(g.a,{onClick:function(e){return N(e)},name:"post",color:"primary",autoFocus:!0},"Post"))))})),B="https://europe-west1-chat-app-5c91e.cloudfunctions.net/api",F=function(){return function(e){return e({type:"CLEAR_ERRORS"})}},H=function(){return function(e){var t=M("fbToken");fetch("".concat(B,"/user"),{method:"GET",headers:{"Content-type":"application/json",Authorization:t},referrer:"",mode:"cors",cache:"reload",redirect:"follow"}).then((function(e){return e.json()})).then((function(t){e({type:"SET_USER",payload:t})})).catch((function(e){return console.log(e.config)}))}},z=function(){return function(e){localStorage.removeItem("fbToken"),delete W.a.defaults.headers.common.Authorization,e({type:"SET_UNAUTHENTICATED"}),e({type:"CLEAR_USER_MESSAGES"})}},q=function(){return function(e){return e({type:"RESET_WARNING"})}},G=function(){return function(e){e({type:"DELETE_WARNING"})}},K=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(){console.clear(),e.props.resetWarningMessage(),e.props.userLogout()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.authenticated;return r.a.createElement(p.a,null,r.a.createElement(d.a,{className:"nav-container"},r.a.createElement(g.a,{color:"inherit",component:u.b,to:"/repositories/chatapp/"},"Home"),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{onClick:this.handleLogout,color:"inherit",component:u.b,to:"/repositories/chatapp/login"},"Logout"),r.a.createElement(_,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{color:"inherit",component:u.b,to:"/repositories/chatapp/login"},"Login"),r.a.createElement(g.a,{color:"inherit",component:u.b,to:"/repositories/chatapp/signup"},"Signup"))))}}]),a}(n.Component),X={userLogout:z,resetWarningMessage:q},J=Object(k.b)((function(e){return{authenticated:e.user.authenticated}}),X)(K),V=a(140),Q=a(14),Z=Object(k.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,n=Object(V.a)(e,["component","authenticated"]);return console.log(n),r.a.createElement(Q.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(Q.a,{to:"/repositories/chatapp/"}):r.a.createElement(t,e)}}))})),Y=a(256),$=a(97),ee=a(258),te=a(255),ae=a(257),ne=a(18),re=a(127),oe=a.n(re),ie=Object(N.a)((function(e){return{footer:{position:"absolute",width:"100vw",minHeight:"170px",left:0,right:0,padding:"3rem 1rem 2rem 1rem",marginTop:"7rem",borderTop:"1px solid ".concat(e.palette.primary.main),background:"linear-gradient(-45deg, #3dc391 0%, #05382c 100%)"},innerWrapper:{display:"flex",width:"100%",margin:"0 2rem"},mobileInnerWrapper:Object(ne.a)({},e.breakpoints.down("sm"),{width:"100%",display:"flex",justifyContent:"center",flexDirection:"column",textAlign:"center"}),footerLinks:Object(ne.a)({width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"flex-end",color:e.palette.primary.dark},e.breakpoints.between("md","lg"),{margin:"1rem 0"}),mobileFooterLinks:Object(ne.a)({},e.breakpoints.down("sm"),{display:"flex",width:"100%",flexDirection:"row",margin:"1rem 0",padding:"0 5px",justifyContent:"center","& > div":{maxWidth:"inherit",flex:"0 1 33%","& h2":{textAlign:"center"},"& li":{textAlign:"center"}}}),list:{"& h2":{textAlign:"right"},"& li":{textAlign:"right"}},logo:{alignItems:"center",padding:"1rem 0","& a":{color:e.palette.primary.contrastText}},footerTitle:{color:oe.a[100]},footerHeading:{color:e.palette.primary.contrastText,fontWeight:500,textAlign:"center"},ul:{listStyleType:"none",textAlign:"center"},footerLink:{color:e.palette.common.white}}})),se=a(254),le=Object(k.b)((function(e){return{messages:e.messages,loading:e.ui.loading}}))((function(e){e.messages;var t=e.loading,a=ie(),n=Object(se.a)("(max-width: 600px)");return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(ee.a,{color:"primary",size:40,className:a.spinner}):r.a.createElement("footer",{className:a.footer,"data-test":"footerWrapper"},r.a.createElement(te.a,null,r.a.createElement(Y.a,{container:!0},r.a.createElement("div",{className:n?a.mobileInnerWrapper:a.innerWrapper},r.a.createElement(Y.a,{item:!0,xs:12,sm:3},r.a.createElement("div",{className:a.logo},r.a.createElement(ae.a,{"data-test":"appName",className:a.footerTitle,variant:"h3",href:"/"},"Chat-App"))),r.a.createElement("div",{className:n?a.mobileFooterLinks:a.footerLinks},r.a.createElement(Y.a,{item:!0,xs:6,sm:3,className:a.list},r.a.createElement($.a,{className:a.footerHeading,component:"h2",gutterBottom:!0},"Pages"),r.a.createElement("ul",{className:a.ul},r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,color:"inherit",variant:"body2",href:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,color:"inherit",variant:"body2",href:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,color:"inherit",variant:"body2",href:"/signup"},"Signup")))),r.a.createElement(Y.a,{item:!0,xs:6,sm:3,className:a.list},r.a.createElement($.a,{className:a.footerHeading,component:"h2",gutterBottom:!0},"Social"),r.a.createElement("ul",{className:a.ul},r.a.createElement("li",null,r.a.createElement(ae.a,{target:"_blank",className:a.footerLink,color:"inherit",variant:"body2",title:"Github website",href:"https://github.com",rel:"nonopener nonreferer"},"Github")),r.a.createElement("li",null,r.a.createElement(ae.a,{target:"_blank",className:a.footerLink,color:"inherit",variant:"body2",title:"Stackoverflow website",href:"https://stackoverflow.com",rel:"nonopener nonreferer"},"Stackoverflow")),r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,target:"_blank",color:"inherit",variant:"body2",title:"Twitter website",href:"https://twitter.com",rel:"nonopener nonreferer"},"Twitter")))),r.a.createElement(Y.a,{item:!0,xs:6,sm:3,className:a.list},r.a.createElement($.a,{className:a.footerHeading,component:"h2",gutterBottom:!0},"Company"),r.a.createElement("ul",{className:a.ul},r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,color:"inherit",variant:"body2",href:"#aboutus"},"About Us")),r.a.createElement("li",null,r.a.createElement(ae.a,{className:a.footerLink,color:"inherit",variant:"body2",href:"#contactus"},"Contact Us"))))))))))})),ce=a(35),me=a.n(ce),ue=a(128),pe=a.n(ue),de=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bio:"",location:"",website:"",open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleProfileChange=function(t){var a=t.target,n=a.name,r=a.value,o=a.type;"text"!==o&&"textarea"!==o||e.setState(Object(ne.a)({},n,r))},e.handleCancel=function(){e.setState({open:!1})},e.handleSubmit=function(){var t=e.state,a={bio:t.bio,location:t.location,website:t.website};e.setState({open:!1}),e.props.userProfileUpdate(a)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.user.protected,t=e.bio,a=e.location,n=e.website;this.setState({bio:t||"enter a brief intro",location:a||"enter your location",website:n||"enter website or blog if avail"})}},{key:"render",value:function(){var e=this.state.open,t=this.props.classes;return r.a.createElement("form",null,r.a.createElement("div",{className:t.userProfileIconWrap},r.a.createElement(pe.a,{className:t.editProfileIcon,onClick:this.handleOpen,color:"primary"}),r.a.createElement($.a,{variant:"body1",component:"span",color:"textSecondary"},"Edit user profile")),r.a.createElement(E.a,{open:e,onClose:this.handleClose},r.a.createElement(x.a,{className:t.editProfile,id:"editProfile",align:"center"},"Edit User Profile"),r.a.createElement(y.a,{className:t.userProfileContent},r.a.createElement(v.a,{align:"center"},"Make changes to your user profile here below."),r.a.createElement(f.a,{autoFocus:!0,margin:"dense",id:"userStatement",name:"bio",value:this.state.bio,label:"enter a brief bio",type:"textarea",onChange:this.handleProfileChange,fullWidth:!0}),r.a.createElement(f.a,{autoFocus:!0,margin:"dense",name:"location",value:this.state.location,id:"userLocation",label:"enter your Location",type:"text",fullWidth:!0,onChange:this.handleProfileChange}),r.a.createElement(f.a,{autoFocus:!0,margin:"dense",name:"website",value:this.state.website,id:"userWebsite",label:"enter website or blog if available",type:"type",fullWidth:!0,onChange:this.handleProfileChange})),r.a.createElement(b.a,{className:t.userProfileActions},r.a.createElement(g.a,{onClick:this.handleCancel,color:"primary"},"Cancel"),r.a.createElement(g.a,{onClick:this.handleSubmit,color:"primary"},"Save Changes"))))}}]),a}(n.Component),ge={userProfileUpdate:function(e){return function(t){t({type:"SET_LOADING_ON"});var a=localStorage.getItem("fbToken");fetch("".concat(B,"/user"),{method:"POST",headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(){return t(H())})).catch((function(e){return console.log(e)}))}}},he=Object(k.b)((function(e){return{user:e.user,authenticated:e.user}}),ge)(me()({userProfileIconWrap:{marginTop:"1rem",marginBottom:"1.15rem",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center","& span":{flex:"0 1 35%"},"& svg":{flex:"0 1 12%",cursor:"pointer"}},editProfile:{margin:"1rem 0 0"},editProfileIcon:{width:"22px",height:"22px",verticalAlign:"middle"},userProfileContent:{background:"#F5F5F5",padding:"1.5rem 1.5rem 2rem 1.5rem",margin:"1rem 0"},userProfileActions:{padding:"1rem"}})(de)),fe=a(142),Ee=a(83),be=a.n(Ee),ye=a(131),ve=a.n(ye),xe=a(132),Ne=a.n(xe),Se=a(133),we=a.n(Se),Oe=a(129),ke=a.n(Oe),Te=a(260),je=a(130),Ae=a.n(je),Ce=Object(N.a)((function(e){return{userProfileWrapper:{position:"relative",minWidth:"300px",minHeight:"450px"},userImage:{padding:"1rem 0"},profileImage:{margin:"0 auto",width:"100%",maxWidth:"250px",height:"auto",minHeight:"250px"},userInfo:{textAlign:"center",margin:"1.15rem 0"},userHeading:{textAlign:"center",marginBottom:"1.75rem"},profileDetails:{padding:"1rem"},profileSpinner:{position:"absolute",top:"15vh",right:"25%"},userProfileIcon:{width:"28px",height:"auto",verticalAlign:"middle"},userProfileIconSecondary:{width:"24px",height:"auto",verticalAlign:"top"}}})),We=function(e){var t=e.loading,a=(e.authenticated,e.protected),n=a.imageUrl,o=a.user,i=a.bio,s=a.location,l=a.website,c=a.createdAt,m=e.handleUserProfileImage,u=Ce();return r.a.createElement("div",{className:u.userProfileWrapper},!n||t?r.a.createElement(ee.a,{color:"primary",size:40,className:u.profileSpinner}):r.a.createElement(fe.a,{className:u.userProfile,elevation:2},r.a.createElement("div",{className:u.profileImage},r.a.createElement("img",{src:n||ke.a,className:u.userImage,width:250,height:250,alt:"user profile ".concat(o," ")}),r.a.createElement("div",{className:"uploadImageWrap"},r.a.createElement("input",{hidden:"hidden",type:"file",id:"userProfileImage",name:"userProfileImage",onChange:function(e){return m(e)}}),r.a.createElement(Te.a,{color:"primary",onClick:function(){document.getElementById("userProfileImage").click()}},r.a.createElement(Ae.a,null)),r.a.createElement($.a,{variant:"body1",component:"span",color:"textSecondary"},"Edit Picture"))),r.a.createElement("div",{className:u.profileDetails},r.a.createElement($.a,{variant:"h3",color:"secondary",className:u.userHeading},r.a.createElement(ve.a,{className:u.userProfileIcon,color:"secondary"})," ",o?o.charAt(0).toUpperCase()+o.slice(1):"username"),r.a.createElement("hr",null),r.a.createElement(he,null),r.a.createElement($.a,{variant:"body1",className:u.userInfo},i||"".concat(o,"'s feeling lucky today")),r.a.createElement($.a,{variant:"body1",className:u.userInfo},r.a.createElement(Ne.a,{color:"secondary",className:u.userProfileIconSecondary})," ",s||"".concat(o," location")),r.a.createElement($.a,{variant:"body1",className:u.userInfo},r.a.createElement(we.a,{color:"secondary",className:u.userProfileIconSecondary})," ",l||"".concat(o," website")),r.a.createElement($.a,{variant:"body2",color:"textSecondary",className:u.userInfo},"Member since ",be()(c).format("dddd, MMMM Do YYYY")))))},Re=a(272),Ie=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).messages=function(){var e=n.props,t=e.authenticated,a=e.warning,r=e.deleteMessageWarning,o=n.state.options,i=o.notAuthWarning,s=o.authWarning,l=o.authDelWarning;return!t&&a?i:t&&r?l:s},n.handleClick=function(){n.props.deleteMessageWarning&&n.props.handleDeleteWarning()},n.handleClose=function(){n.props.warning&&n.props.handleResetliked(),n.props.deleteMessageWarning&&n.props.handleResetDeleteWarning()},n.state={options:{notAuthWarning:"To Like a message, you must be logged in",authWarning:"Message already liked",authDelWarning:"Cannot delete a message posted by someone else."}},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.vertical,a=e.horizontal,n=e.open,o=r.a.createElement(g.a,{onClick:this.handleClose,color:"secondary",size:"small"},"Close");return r.a.createElement("div",null,r.a.createElement("button",{type:"button",id:"warningClickButton",hidden:"hidden",onClick:this.handleClick}),!!n&&r.a.createElement(Re.a,{style:{marginTop:"3.5rem"},color:"primary",elevation:2,size:"xs",anchorOrigin:{vertical:t,horizontal:a},open:n,message:this.messages(),key:a+t,action:o}))}}]),a}(n.Component),Me=a(261),Le=a(4),De=Object(Le.a)((function(e){return{badge:{right:-12,top:0,padding:"0 4px"}}}))(Me.a);function Pe(e){var t=e.likeCount,a=e.color;return r.a.createElement(De,{badgeContent:t,color:a})}var Ue=a(134),_e=a.n(Ue),Be=Object(N.a)((function(e){return{dialogTitle:{color:e.palette.primary.dark,marginTop:"1rem",padding:"1rem"},deleteButton:{margin:"0",float:"left",lineHeight:1.5,"& svg":{verticalAlign:"text-top",cursor:"pointer",width:"26px",height:"26px",marginLeft:"-4px"}},deleteHeading:{fontWeight:500,display:"block",fontSize:"1.5rem",color:e.palette.secondary.main},deleteAction:{fontWeight:500},dialogDescription:{color:e.palette.secondary.contrastText,padding:"1rem"},deleteInfo:{fontSize:"1rem"},dialogActions:{padding:"1rem",display:"flex",flexDirection:"row",justifyContent:"flex-end"}}})),Fe={getDeleteMessage:function(e,t,a){return function(){var n=Object(A.a)(j.a.mark((function n(r){var o,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("enter"),console.log("is message id => ",e),console.log("is user => ",t),console.log("is userMessage => ",a),n.next=6,D(t,a);case 6:if(o=n.sent,i=M("fbToken"),o){n.next=11;break}return console.log("send warning badge - user does not own this message"),n.abrupt("return",!0);case 11:fetch("".concat(P,"/messages/").concat(e),{method:"DELETE",headers:{"Content-type":"application/json",Authorization:i}}).then((function(){r({type:"SET_DELETE",payload:e}),localStorage.messages&&localStorage.removeItem("messages")})).catch((function(e){return console.log("error => ",e)}));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setDeleteWarning:G},He=Object(k.b)((function(e){return{user:e.user,authenticated:e.user.authenticated,deleteMessageWarning:e.ui.deleteMessageWarning}}),Fe)((function(e){var t=e.messageId,a=e.user,n=e.userMessage,o=(e.authenticated,e.deleteMessageWarning,e.setDeleteWarning,e.getDeleteMessage),i=e.handleDeleteWarning,s=Be(),l=r.a.useState(!1),c=Object(h.a)(l,2),m=c[0],u=c[1],p=function(e){"delete"===e.target.parentElement.name.toLowerCase()&&o(t,a,n),u(!1)};return r.a.createElement("div",{className:s.deleteButton},r.a.createElement(_e.a,{onClick:function(){var e=a.protected.user;if(n===e)return u(!0);i()},color:"secondary"}),r.a.createElement(E.a,{open:m,onClose:p},r.a.createElement(x.a,{className:s.dialogTitle,id:"alert-dialog-title"},"Are you sure you want to delete this message?"),r.a.createElement("div",{className:s.dialogDescription},r.a.createElement("h1",{className:s.deleteHeading},"All delete actions are final!"),r.a.createElement("div",{className:s.deleteInfo},r.a.createElement("p",null,"Press",r.a.createElement("span",{className:s.deleteAction}," Delete "),"to proceed with deletion or",r.a.createElement("span",{className:s.deleteAction}," Cancel "),", if you've changed your mind."))),r.a.createElement("div",{className:s.dialogActions},r.a.createElement(g.a,{onClick:function(e){return p(e)},name:"cancel",color:"secondary"},"Cancel"),r.a.createElement(g.a,{onClick:function(e){return p(e)},name:"delete",color:"primary",autoFocus:!0},"Delete"))))})),ze=a(262),qe=a(264),Ge=a(263),Ke=Object(N.a)((function(e){return{card:Object(ne.a)({display:"flex",zIndex:0,padding:"1rem",marginBottom:20,background:e.palette.grey[50],transition:e.transitions.easing.easeInOut,transitDelay:e.transitions.duration.enteringScreen},e.breakpoints.down("sm"),{flexDirection:"column"}),image:Object(ne.a)({width:"100%",maxWidth:"310px",transform:"scale(0.825)",height:"auto",marginRight:"1rem",boxShadow:e.shadows[1]},e.breakpoints.down("sm"),{maxWidth:"250px",margin:"0 auto",height:"250px",boxShadow:"none"}),imageAuth:Object(ne.a)({width:"100%",maxWidth:"250px",transform:"scale(0.8)",height:"auto",marginRight:"1rem"},e.breakpoints.down("sm"),{maxWidth:"250px",margin:"0 auto",height:"250px",boxShadow:"none"}),content:{padding:"24px",display:"flex",flexDirection:"column",height:"auto",justifyContent:"space-between",width:"100%"},heading:Object(ne.a)({textTransform:"capitalize"},e.breakpoints.down("sm"),{textAlign:"center"}),likeButtonWrapper:Object(ne.a)({padding:0,marginTop:".85rem",display:"flex",flexDirection:"row",flexWrap:"wrap",width:"22px",justifyContent:"flex-start"},e.breakpoints.down("sm"),{textAlign:"center",width:"100%",justifyContent:"center"}),likeButton:{width:"22px"},unlikeButton:{width:"22px"},messageInnerWrapper:Object(ne.a)({color:e.palette.primary.mainText,fontSize:".94rem",lineHeight:1.5,display:"flex",flexDirection:"column",verticalAlign:"baseline",padding:"1rem 0",justifyContent:"flex-start",minHeight:"185px"},e.breakpoints.down("sm"),{textAlign:"center"})}})),Xe=a(135),Je=a.n(Xe),Ve=a(136),Qe=a.n(Ve),Ze=function(e){e.loading;var t=e.imageUrl,a=e.messageId,n=e.message,o=e.likeCount,i=e.createdAt,s=e.authenticated,l=e.deleteMessageWarning,c=e.warning,m=e.user,p=e.horizontal,d=e.vertical,g=e.open,h=e.handleLiked,f=e.handleDeleteWarning,E=e.handleResetDeleteWarning,b=e.handleResetliked,y=Ke();return r.a.createElement(ze.a,{className:y.card,key:a,elevation:2},r.a.createElement(Ge.a,{className:s?y.imageAuth:y.image,image:t,loading:"auto",title:"User profile"}),r.a.createElement(qe.a,{className:y.content},r.a.createElement($.a,{className:y.heading,component:u.b,to:"/repositories/chatapp/users/".concat(m),variant:"h4",color:"primary"},m),r.a.createElement("div",{className:y.messageInnerWrapper},n,r.a.createElement(Te.a,{onClick:function(){return h(a)},className:y.likeButtonWrapper},o>0?r.a.createElement(Je.a,{className:y.likeButton,color:"secondary"}):r.a.createElement(Qe.a,{className:y.unlikeButton,color:"secondary"}),r.a.createElement(Pe,{likeCount:o,color:"primary"})),!!s&&r.a.createElement(He,{messageId:a,userMessage:m,handleDeleteWarning:f})),r.a.createElement($.a,{variant:"body2",color:"textSecondary"},be()(i).fromNow())),!!c&&!l&&r.a.createElement(Ie,{warning:c,open:g,authenticated:s,handleLiked:h,handleResetliked:b,horizontal:p,vertical:d}),!!l&&!c&&r.a.createElement(Ie,{open:g,deleteMessageWarning:l,authenticated:s,handleDeleteWarning:f,handleResetDeleteWarning:E,horizontal:p,vertical:d}))},Ye=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleDeleteWarning=function(){n.setState({open:!0}),n.props.setDeleteWarning()},n.handleResetDeleteWarning=function(){n.props.resetDeleteWarning()},n.handleLiked=function(e){var t=n.props,a=t.likes,r=t.authenticated;if(n.setState({open:!0}),r){if(a&&0===a.length)return n.props.handleUpdateLikes(e);if(a&&a.length>0)return a.find((function(t){return t.messageId===e}))?n.props.sendWarningMessage():n.props.handleUpdateLikes(e)}n.props.sendWarningMessage()},n.handleResetliked=function(){n.setState({open:!1}),n.props.resetWarningMessage()},n.state={likedMessage:"",open:!1,vertical:"top",horizontal:"right"},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.horizontal,n=t.vertical,o=t.open,i=this.props,s=i.messages,l=i.handleLikedUnliked,c=i.deleteMessageWarning,m=i.warning,u=i.authenticated;return r.a.createElement(r.a.Fragment,null,s.length>0&&s.map((function(t){return r.a.createElement(Ze,Object.assign({horizontal:a,vertical:n,open:o,key:t.messageId,messages:s,handleLikedUnliked:l,handleLiked:e.handleLiked,handleResetliked:e.handleResetliked,handleResetDeleteWarning:e.handleResetDeleteWarning,handleDeleteWarning:e.handleDeleteWarning,authenticated:u,warning:m,deleteMessageWarning:c},t))})))}}]),a}(n.Component),$e={sendWarningMessage:function(){return function(e){return e({type:"SET_WARNING"})}},resetWarningMessage:q,handleUpdateLikes:function(e){return function(){var t=Object(A.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=M("fbToken"),fetch("".concat(P,"/message/").concat(e,"/like"),{method:"GET",headers:{Accept:"*/*","Content-type":"application/json",Authorization:n,referrer:"",mode:"cors",cache:"reload",redirect:"follow"}}).then((function(e){return e.json()})).then((function(e){a({type:"SET_LIKES",payload:e}),"Message already liked"===e.error&&a({type:"SET_WARNING",payload:e.error})})).catch((function(e){return console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setDeleteWarning:G,resetDeleteWarning:function(){return function(e){e({type:"RESET_DELETE_WARNING"})}}},et=Object(k.b)((function(e){return{authenticated:e.user.authenticated,likes:e.user.likes,warning:e.ui.warning,messages:e.messages,deleteMessageWarning:e.ui.deleteMessageWarning}}),$e)(Ye),tt={palette:{primary:{light:"#009688",main:"#197b84",dark:"#11565c",contrastText:"#ffffff",mainText:"#525252",lightText:"#808080"},secondary:{light:"#f6685e",main:"#f44336",dark:"#aa2e25",contrastText:"#191818",lightText:"rgba(0,0,0,.54)"}},lightGreenBackground:"#f0f8ff",borderPrimaryLight:"#a8ded9",typography:{useNextVariants:!0}},at={homeCards:{zIndex:1,margin:"0 1rem",position:"relative"},homeHeader:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",margin:"10rem 0 5rem"},homeTitle:{fontWeight:400,transition:"font-size .75s ease-in-out 25ms letterSpacing .75s ease-in-out 25ms"},homeRight:{margin:"0 1rem",position:"relative"},refTransform:{position:"fixed",top:"22vh",zIndex:-1,letterSpacing:"1.5px",opacity:"1",transition:"all .85s ease 50ms",fontSize:"2.75rem",color:tt.palette.primary.main,fontWeight:400,transform:"translate(-40vw,3.5vh) rotate(-3.5deg) rotate(3.5deg)"},refInit:{transition:"all .85s ease-out 50ms",fontSize:"3.75rem",letterSpacing:"0",opacity:".85",fontWeight:400,color:tt.palette.primary.main,zIndex:0,transform:"translateX(0)",position:"initial"}},nt=a(37),rt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).handleUserProfileImage=function(){var e=Object(A.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files[0],e.next=3,L(a);case 3:n=e.sent,r.props.setProfileImage(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.titleEle=Object(n.createRef)(null),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.getMessages(),nt.b.from(this.titleEle.current,3,{opacity:.25,color:"#222222",x:-1500})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.authenticated,n=e.loading,o=e.messages,i=e.user,s=a?8:12,l=a?4:"auto";return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement("header",{className:t.homeHeader},r.a.createElement($.a,{ref:this.titleEle,variant:"h2",className:t.homeTitle,color:"primary",align:"center"},"Messages"))),r.a.createElement(Y.a,{item:!0,sm:12,xs:12,md:s},r.a.createElement("div",{className:t.homeCards},!!o&&r.a.createElement(et,{messages:o,handleLikedUnliked:this.handleLikedUnliked}))),r.a.createElement(Y.a,{item:!0,sm:12,xs:12,md:l},r.a.createElement("div",{className:t.homeRight},!!a&&r.a.createElement(We,{protected:i.protected,authenticated:a,loading:n,handleUserProfileImage:this.handleUserProfileImage})))),r.a.createElement(le,null))}}]),a}(n.Component),ot={getMessages:function(){return function(e){e({type:"SET_LOADING_ON"}),fetch("".concat(P,"/messages")).then((function(e){return e.json()})).then((function(t){return R(t),e({type:"SET_MESSAGES",payload:t})})).catch((function(t){console.log(t),e({type:"CLEAR_MESSAGES"})}))}},setProfileImage:function(e){return function(t){t({type:"SET_LOADING_ON"});var a=M("fbToken");fetch("".concat(B,"/user/image"),{method:"POST",headers:{Accept:"*/*",Authorization:a},body:e,referrer:"",mode:"cors",cache:"reload",redirect:"follow"}).then((function(){return t(H())})).catch((function(e){return console.log(e)}))}}},it=Object(k.b)((function(e){return{authenticated:e.user.authenticated,user:e.user,likes:e.user.likes,messages:e.messages,loading:e.ui.loading}}),ot)(me()(at)(rt)),st=a(84),lt=a.n(st),ct=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={email:r.state.email,password:r.state.password};r.props.userLogin(t,r.props.history)},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value,o=t.type;"email"!==o&&"password"!==o||r.setState(Object(ne.a)({},a,n))},r.loginTitleRef=Object(n.createRef)(null),r.state={email:"",password:""},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.clearFormErrors(),nt.b.from(this.loginTitleRef.current,{opacity:.35,color:"#222222",duration:2.5,rotationX:360})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.errors,n=this.state,o=n.email,i=n.password;return r.a.createElement("div",{className:t.loginForm},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,sm:12,xs:12},r.a.createElement($.a,{ref:this.loginTitleRef,variant:"h2",className:t.loginTitle,color:"primary",align:"center"},"Login"),r.a.createElement("form",{id:"login",noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("div",{className:t.innerForm},r.a.createElement(f.a,{id:"email",className:t.emailField,name:"email",type:"email",label:"Email",value:o,helperText:a.email,error:!!a.email,placeholder:"Enter email",onChange:this.handleChange,autoComplete:"email",fullWidth:!0}),r.a.createElement(f.a,{id:"password",className:t.passwordField,name:"password",type:"password",label:"Password",placeholder:"Enter password",value:i,helperText:a.password,error:!!a.password,onChange:this.handleChange,autoComplete:"password",fullWidth:!0}),r.a.createElement(g.a,{type:"submit",variant:"contained",size:"large",className:t.loginButton,endIcon:r.a.createElement(lt.a,null),color:"primary"},"Login")),a.error&&r.a.createElement($.a,{variant:"body1",className:t.credentialsError},"Don't have an account? Click",r.a.createElement(u.b,{to:"/repositories/chatapp/signup",className:t.errorsHereLink},"here"))))))}}]),a}(n.Component),mt={userLogin:function(e,t){return function(a){a({type:"SET_LOADING_ON"}),W.a.post("".concat(B,"/login"),e).then((function(e){a({type:"SET_LOADING_ON"}),I(e.data.token),a({type:"SET_AUTHENTICATED"}),a(H()),t.push("/repositories/chatapp/")})).catch((function(e){console.log(e.response),a({type:"SET_ERRORS",payload:e.response.data})}))}},clearFormErrors:F},ut=Object(k.b)((function(e){return{user:e.user,loading:e.ui.loading,errors:e.ui.errors}}),mt)(me()({loginForm:{textAlign:"center",position:"relative"},innerForm:{display:"flex",flexDirection:"column",padding:"3rem",marginBottom:"6rem"},loginTitle:{fontWeight:400,margin:"10rem 0 5rem"},emailField:{margin:"2rem 0",height:"80px"},passwordField:{marginBottom:"2rem",height:"80px"},credentialsError:{color:"#F44336",marginTop:"3rem",width:"100%",textAlign:"center"},errorsHereLink:{color:"#515151",margin:"0 5px",textDecoration:"underline"},spinner:{position:"absolute",top:"36vh",left:"47%"},loginButton:{marginTop:"3rem"}})(ct)),pt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={email:r.state.email,password:r.state.password,user:r.state.user,confirmPassword:r.state.confirmPassword};r.props.userSignup(t,r.props.history)},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value,o=t.type;"email"!==o&&"password"!==o&&"text"!==o||r.setState(Object(ne.a)({},a,n))},r.signupTitleRef=Object(n.createRef)(null),r.state={user:"",email:"",password:"",confirmPassword:""},r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.clearFormErrors(),nt.a.from(this.signupTitleRef.current,{opacity:.35,color:"#222222",duration:2.5,rotationX:360})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.errors,n=this.state,o=n.user,i=n.email,s=n.password,l=n.confirmPassword;return r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,sm:12,xs:12},r.a.createElement($.a,{ref:this.signupTitleRef,variant:"h2",className:t.signupTitle,color:"primary",align:"center"},"Signup"),r.a.createElement("form",{id:"signup",noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("div",{className:t.innerForm},r.a.createElement(f.a,{id:"userSignup",className:t.userField,name:"user",type:"text",label:"User",value:o,helperText:a.user,error:!!a.user,placeholder:"Enter username",onChange:this.handleChange,fullWidth:!0}),r.a.createElement(f.a,{id:"emailSignup",className:t.emailField,name:"email",type:"email",label:"Email",value:i,helperText:a.email,error:!!a.email,placeholder:"Enter email",onChange:this.handleChange,autoComplete:"email",fullWidth:!0}),r.a.createElement(f.a,{id:"passwordSignup",className:t.passwordField,name:"password",type:"password",label:"Password",placeholder:"Enter password",value:s,helperText:a.password,error:!!a.password,onChange:this.handleChange,autoComplete:"password",fullWidth:!0}),r.a.createElement(f.a,{id:"confirmPasswordSignup",className:t.confirmPasswordField,name:"confirmPassword",type:"password",label:"Confirm password",placeholder:"Enter password again",value:l,helperText:a.confirmPassword,error:!!a.confirmPassword,onChange:this.handleChange,autoComplete:"confirm-password",fullWidth:!0}),r.a.createElement(g.a,{type:"submit",variant:"contained",size:"large",className:t.signupButton,endIcon:r.a.createElement(lt.a,null),color:"primary"},"Signup")),a.loginMsg&&r.a.createElement($.a,{variant:"body1",className:t.credentialsError},a.loginMsg," Already have an account? Click",r.a.createElement(u.b,{to:"/login",className:t.errorsHereLink},"here")),a.regMsg&&r.a.createElement($.a,{variant:"body1",className:t.credentialsError},a.regMsg))))}}]),a}(n.Component),dt={userSignup:function(e,t){return function(a){a({type:"SET_LOADING_ON"}),W.a.post("".concat(B,"/signup"),e).then((function(e){I(e.data.token),a(H()),a({type:"CLEAR_ERRORS"}),t.push("/repositories/chatapp/")})).catch((function(e){console.log(e.response),a({type:"SET_ERRORS",payload:e.response.data})}))}},clearFormErrors:F},gt=Object(k.b)((function(e){return{user:e.user,errors:e.ui.errors,loading:e.ui.loading}}),dt)(me()({innerForm:{display:"flex",flexDirection:"column",padding:"3rem"},signupTitle:{fontWeight:400,margin:"10rem 0 5rem"},userField:{margin:"1rem 0",height:"80px"},emailField:{margin:"1rem 0",height:"80px"},passwordField:{margin:"1rem 0",height:"80px"},confirmPasswordField:{margin:"1rem 0",height:"80px"},credentialsError:{color:"#F44336",width:"100%",textAlign:"center"},errorsHereLink:{color:"#515151",margin:"0 5px",textDecoration:"underline"},signupButton:{margin:"4rem 0 3rem"}})(pt)),ht=a(266),ft=a(267),Et=a(265),bt=a(137),yt=a.n(bt),vt=Object(N.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}},extendedIcon:{marginRight:e.spacing(1)}}}));function xt(){var e=vt();return r.a.createElement("div",{className:e.root},r.a.createElement(Et.a,{color:"primary",variant:"extended"},r.a.createElement(yt.a,{className:e.extendedIcon}),r.a.createElement(u.b,{style:{color:"white",fontWeight:500},to:"/repositories/chatapp/login"},"Login here")))}var Nt={userWrapper:{margin:"0 1rem"},userHeader:{display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",margin:"3rem 0"},userTitle:{fontWeight:400,margin:"7rem 0 3rem"},messagesHeader:{padding:"0"},userName:{color:tt.palette.secondary.main},content:{padding:24},userMessages:{margin:"3rem 0"},userRoot:{marginBottom:"2rem",padding:"1rem"},userMainMessage:{color:tt.palette.primary.mainText,fontWeight:400,fontSize:"1rem",marginBottom:"1rem"},userMessage:{color:tt.palette.primary.mainText,fontWeight:400},root:{margin:"2rem 0",marginBottom:"3rem",color:tt.palette.primary.mainText},userProfileInfo:{margin:"3rem 0",padding:"2rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"auto"},userInfoWrapper:{padding:"2rem",border:"1px solid",borderColor:tt.borderPrimaryLight,borderRadius:"4px",backgroundColor:tt.palette.lightGreenBackground},userProfileImage:{width:"100%",height:"auto",margin:"1rem auto 1rem",maxWidth:"150px"},userLoginButton:{},userFabButton:{},userSubtitles:{color:tt.palette.primary.mainText,textAlign:"left",width:"100%",display:"flex",alignItems:"self-start"},userSubtitlesLight:{color:tt.palette.secondary.lightText,textAlign:"left",width:"100%",display:"flex",alignItems:"self-start"},userUserSpan:{color:tt.palette.primary.main,marginRight:"20px"},userUserSpanBio:{color:tt.palette.primary.main,marginRight:"10px"},userSubtitlesHeading:{color:tt.palette.secondary.main,textAlign:"left",width:"100%"},userTitle2:{color:tt.palette.primary.light},actionMessage:{display:"inline",width:"50%"},userMessageq:{color:tt.palette.secondary.light,marginRight:"5px"},userFootnote:{margin:"1rem 0",fontSize:"1rem","& a":{color:tt.palette.secondary.main}},userActions:{margin:"2rem 0 0"}},St=function(e){switch(null!==e.current?e.current.classList[1].split("-")[1]:""){case"userTitle":return nt.b.from(e.current,{opacity:.35,color:"#222222",duration:2.5,rotationX:360});case"userSubtitle":return nt.b.from(e.current,{opacity:.35,duration:2.75,x:-1200});case"userSubtitleProfile":return nt.b.from(e.current,{opacity:.35,duration:3,x:1500});default:return}},wt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).getUser=function(){r.props.getUserProfileNMessages(r.props.match.params.user)},r.userRef=Object(n.createRef)(null),r.userMessagesRef=Object(n.createRef)(null),r.userProfileRef=Object(n.createRef)(null),r}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getUser(),St(this.userRef),St(this.userMessagesRef),St(this.userProfileRef)}},{key:"render",value:function(){var e;console.log(this);var t=this.props.match.params.user,a=t.charAt(0).toUpperCase()+t.slice(1);this.props.user.protected.createdAt&&(e=this.props.user.protected.createdAt.split("T")[0]);var n=this.props,o=n.classes,i=n.authenticated,s=n.userMessages,l=n.user,c=i?6:9;return r.a.createElement("div",{className:o.userWrapper},r.a.createElement(Y.a,{container:!0,spacing:4},r.a.createElement(Y.a,{item:!0,sm:12,xs:12},r.a.createElement("div",{className:o.userWrapper},r.a.createElement("header",{className:o.userHeader},r.a.createElement($.a,{ref:this.userRef,className:o.userTitle,variant:"h2",color:"primary",align:"center"},a)))),r.a.createElement(Y.a,{item:!0,lg:c,md:12,sm:c,xs:12},r.a.createElement("header",{className:o.messagesHeader},r.a.createElement($.a,{ref:this.userMessagesRef,className:o.userTitle2,variant:"h4",align:"left"},"Messages")),r.a.createElement("div",{className:o.userMessages},s&&s.length>0?s.map((function(e){return r.a.createElement(ze.a,{key:e.messageId,className:o.userRoot,elevation:2},r.a.createElement(ht.a,null,r.a.createElement(qe.a,null,r.a.createElement($.a,{className:o.userName,gutterBottom:!0,variant:"h5",component:"h2"},e.user.charAt(0).toUpperCase(),e.user.slice(1)),r.a.createElement($.a,{variant:"body2",className:o.userMainMessage,component:"p"},e.message),r.a.createElement($.a,{variant:"body2",className:o.userMessage,component:"p"},r.a.createElement("span",{className:o.userMessageq},"Created:")," ",e.createdAt.split("T")[0]),r.a.createElement($.a,{variant:"body2",className:o.userMessage,component:"p"},r.a.createElement("span",{className:o.userMessageq},"Likecount:")," ",e.likeCount),r.a.createElement($.a,{variant:"body2",className:o.userMessage,component:"p"},r.a.createElement("span",{className:o.userMessageq},"Message Id:")," ",e.messageId))))})):"No messages")),!i&&r.a.createElement(Y.a,{item:!0,lg:3,sm:3},r.a.createElement("header",null,r.a.createElement(xt,{variant:"extended",className:o.userFabButton,color:"secondary"})),r.a.createElement("div",{className:o.userFootnote},"You must have an account, in order to see user's profile.",r.a.createElement("br",null),"Follow this link to ",r.a.createElement(u.b,{to:"/repositories/chatapp/signup"},"signup")," now.")),!!i&&r.a.createElement(Y.a,{item:!0,lg:6,md:12,sm:6,xs:12},r.a.createElement("header",{className:o.messagesHeader},r.a.createElement($.a,{ref:this.userProfileRef,className:o.userTitle2,variant:"h4",align:"center"},"Profile")),r.a.createElement(ze.a,{className:o.userProfileInfo,elevation:2},r.a.createElement(Ge.a,{className:o.userProfileImage,component:"img",alt:"user profile",width:"150",height:"150",image:l.protected.imageUrl}),r.a.createElement(ht.a,null,r.a.createElement(qe.a,{className:o.userInfoWrapper},r.a.createElement($.a,{className:o.userSubtitlesHeading,gutterBottom:!0,variant:"h5",component:"h2"},a),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpan},"Id:"),l.protected.userId),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpanBio},"Bio:")," ",l.protected.bio),r.a.createElement("br",null),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpan},"Email:")," ",l.protected.email),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpan},"Location:")," ",l.protected.location),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpan},"Website:")," ",l.protected.website),r.a.createElement($.a,{className:o.userSubtitles,variant:"subtitle1",color:"textSecondary",component:"p"},r.a.createElement("span",{className:o.userUserSpan},"Member since:"),e))),i?r.a.createElement(ft.a,{className:o.userActions},r.a.createElement($.a,{className:o.userActionsHeading,variant:"body1",color:"textSecondary",component:"p"},"Post a new message."),r.a.createElement(g.a,{size:"small",color:"secondary"},r.a.createElement(_,{color:"primary"}))):r.a.createElement(ft.a,{className:o.userActions},r.a.createElement($.a,{className:o.userActionsHeading,variant:"body1",color:"textSecondary",component:"p"},"You must be logged in to view this."),r.a.createElement(g.a,{href:"/repositories/chatapp/signup",size:"small",color:"secondary"},"Sign up"),r.a.createElement(g.a,{href:"/repositories/chatapp/login",className:o.userLoginButton,size:"small",color:"secondary"},"Login"))))))}}]),a}(n.Component),Ot={getUserProfileNMessages:function(e){return function(t){t({type:"SET_LOADING_ON"}),fetch("".concat(B,"/users/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",referrer:"",mode:"cors",cache:"reload",redirect:"follow"}}).then((function(e){return e.json()})).then((function(e){console.log(e),t({type:"SET_USER_MESSAGES",payload:e.messages})})).catch((function(e){console.log(e)}))}}},kt=Object(k.b)((function(e){return{authenticated:e.user.authenticated,user:e.user,userMessages:e.user.userMessages,ui:e.ui}}),Ot)(me()(Nt)(wt)),Tt=a(54),jt=a(138),At=a(49),Ct=a(11),Wt={authenticated:!1,protected:{},likes:[],userMessages:[]},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED":return Object(Ct.a)(Object(Ct.a)({},e),{},{authenticated:!0});case"SET_UNAUTHENTICATED":return Wt;case"SET_USER":return Object(Ct.a)(Object(Ct.a)({},e),{},{authenticated:!0,loading:!1},t.payload);case"SET_LIKES":return Object(Ct.a)(Object(Ct.a)({},e),{},{likes:Object(At.a)(e.likes)});case"SET_USER_MESSAGES":return Object(Ct.a)(Object(Ct.a)({},e),{},{userMessages:Object(At.a)(t.payload)});case"CLEAR_USER_MESSAGES":return Object(Ct.a)(Object(Ct.a)({},e),{},{userMessages:[]});default:return e}},It={messages:[]},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGES":return Object(At.a)(t.payload);case"ADD_MESSAGE":var a=t.payload||{};return[a].concat(Object(At.a)(e));case"SET_LIKES":var n=e.findIndex((function(e){return e.messageId===t.payload.messageId}));return e[n]=t.payload,Object(At.a)(e);case"SET_DELETE":var r=e.findIndex((function(e){return e.messageId===t.payload}));return e.splice(r,1),Object(At.a)(e);case"CLEAR_MESSAGES":return It;default:return e}},Lt={loading:!1,errors:{},warning:!1,open:!1,deleteMessageWarning:!1},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_ON":return Object(Ct.a)(Object(Ct.a)({},e),{},{loading:!0});case"SET_LOADING_OFF":return Lt;case"CLEAR_ERRORS":return Object(Ct.a)(Object(Ct.a)({},e),{},{loading:!1,errors:{}});case"SET_ERRORS":return Object(Ct.a)(Object(Ct.a)({},e),{},{loading:!1,errors:t.payload});case"SET_WARNING":return Object(Ct.a)(Object(Ct.a)({},e),{},{warning:!0,open:!0,deleteMessageWarning:!1});case"DELETE_WARNING":return Object(Ct.a)(Object(Ct.a)({},e),{},{deleteMessageWarning:!0,warning:!1,open:!0});case"RESET_DELETE_WARNING":return Object(Ct.a)(Object(Ct.a)({},e),{},{deleteMessageWarning:!1,open:!1,warning:!1});case"RESET_WARNING":return Object(Ct.a)(Object(Ct.a)({},e),{},{warning:!1,open:!1,deleteMessageWarning:!1});default:return Lt}},Pt=[jt.a],Ut=Object(Tt.c)({user:Rt,messages:Mt,ui:Dt}),_t=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):Tt.d)(Tt.a.apply(void 0,Pt)),Bt=Object(Tt.e)(Ut,{},_t),Ft=a(139),Ht=a.n(Ft),zt=a(259),qt=a(93),Gt=a.n(qt),Kt=a(268),Xt=(a(211),Gt()(tt));console.log(Xt);var Jt=localStorage.getItem("fbToken");Jt&&(1e3*Ht()(Jt).exp<Date.now()?(Bt.dispatch(z()),window.location.href="/login"):(Bt.dispatch({type:"SET_AUTHENTICATED"}),W.a.defaults.headers.common.Authorization=Jt,Bt.dispatch(H())));var Vt=function(e){Object(c.a)(a,e);var t=Object(m.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(zt.a,{theme:Xt},r.a.createElement(k.a,{store:Bt},r.a.createElement(Kt.a,null),r.a.createElement(u.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(J,null),r.a.createElement(Q.d,null,r.a.createElement(Q.b,{exact:!0,path:"/repositories/chatapp/",component:it}),r.a.createElement(Z,{exact:!0,path:"/repositories/chatapp/login",component:ut}),r.a.createElement(Z,{exact:!0,path:"/repositories/chatapp/signup",component:gt}),r.a.createElement(Q.b,{exact:!0,path:"/repositories/chatapp/users/:user",component:kt}))))))}}]),a}(n.Component);i.a.render(r.a.createElement(Vt,null),document.getElementById("root-chat"))}},[[159,1,2]]]);
//# sourceMappingURL=main.ba78af3e.chunk.js.map